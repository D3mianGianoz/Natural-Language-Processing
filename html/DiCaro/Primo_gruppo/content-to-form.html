<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>DiCaro.Primo_gruppo.content-to-form API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>DiCaro.Primo_gruppo.content-to-form</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># TLN_dicaro_1.5
#  Esperimento content-to-form
#  Usando i dati dell’esercizio 1.1
#  Per ogni concetto, prendere le definizioni a disposizione,
#  Cercare in WordNet il synset corretto
#  Suggerimento: usate il principio del “genus” per indirizzare la ricerca
import time
from pathlib import Path
import pandas as pd
import nltk
from itertools import chain
from collections import Counter
from nltk.corpus import wordnet as wn, stopwords


def words_extraction(sent):
    bag = []
    stop_words = set(stopwords.words(&#39;english&#39;))
    punctuation = {&#39;,&#39;, &#39;;&#39;, &#39;(&#39;, &#39;)&#39;, &#39;{&#39;, &#39;}&#39;, &#39;:&#39;, &#39;?&#39;, &#39;!&#39;}
    # Return a tokenized copy of text, using NLTK’s recommended word tokenizer (Treebank + PunkSentence)
    tokens = nltk.word_tokenize(sent)
    for tok in tokens:
        if tok.lower() not in stop_words:
            if tok.lower() not in punctuation:
                bag.append(tok.lower())
    return list(bag)


def compute_genus(concept, num=4):
    extracted_c = concept.apply(lambda x: words_extraction(x.lower())[:num])
    print(extracted_c.head())
    extracted_c = list(chain.from_iterable(extracted_c))

    # Wrap it in a counter
    counter = Counter(extracted_c)

    genus = []
    for key, value in counter.items():
        if value in sorted(counter.values())[-num:]:
            genus.append(key)
    return genus


def get_synset_hyponyms(genus):
    hypon_l = []
    for gen in genus:
        for ss in wn.synsets(str(gen)):
            # print(f&#39;genus.sense: {str(ss.name())}&#39;)
            for hypon in ss.hyponyms():  # trovo gli iponimi
                hypon_l.append(hypon)
                # print(f&#39;hypon_l: {str(hypon_l)}&#39;)
    return hypon_l


def infer_similiarity(def1, def2, n=4):
    bow_a = list(words_extraction(def1.lower()))[:n]
    bow_b = list(words_extraction(def2.lower()))[:n]
    result = evaluate_performance(bow_a, bow_b)
    return result


def evaluate_performance(bow1, bow2):
    return len(set(bow1) &amp; set(bow2)) * 2 / (len(bow1) + len(bow2))


def content_to_form_result(hypon_list, concept, title, num=4):
    max_sym = 0
    my_synset = &#39;&#39;
    max_list = []

    for hyp in hypon_list:
        # Here I extract the definition
        lex = []
        definition = hyp.definition()
        lex.append(definition)
        # print(&#39;definition: &#39; + str(definition))
        for ex in hyp.examples():
            lex.append(ex)
            # print(&#39;example: &#39; + str(ex))

        for my_def in concept:
            for wn_def in lex:
                my_sym = infer_similiarity(my_def, wn_def, n=num)
                if my_sym &gt; max_sym:
                    max_list.append([max_sym, hyp])
                    max_sym = my_sym
                    my_synset = hyp
    print(&#39;max_sym is: &#39; + str(max_sym))
    print(f&#39;my wn synset inferred for {title} is: {my_synset}&#39;)

    print(f&#39;The best word forms for {title} concept&#39;)
    for elem in sorted(max_list, key=lambda x: x[0], reverse=True):
        print(f&#39;Score: {elem[0]} for synset: {elem[1]}&#39;)


if __name__ == &#39;__main__&#39;:
    path = Path(&#39;.&#39;) / &#39;input&#39; / &#39;1-1_defs.csv&#39;
    start = time.time()

    df = pd.read_csv(path).dropna()

    courage = df[&#39;Courage&#39;]
    paper = df[&#39;Paper&#39;]
    apprehension = df[&#39;Apprehension&#39;]
    sharpener = df[&#39;Sharpener&#39;]

    print(&#34;I verify the terms exist in WN and have associated synsets&#34;)
    term_list = [&#39;courage&#39;, &#39;paper&#39;, &#39;apprehension&#39;, &#39;sharpener&#39;]

    for term in term_list:
        print(&#39;Term: &#39; + str(term))
        for ss in wn.synsets(term):
            print(ss)
        print()

    sent = &#39;Hi, my name is Damiano and I am here to implement and format this code&#39;
    hello = words_extraction(sent)
    print(sent)
    print(f&#39;testing the methodology {hello}\n&#39;)

    Genus_Courage = compute_genus(concept=courage, num=3)
    hypon_courage = get_synset_hyponyms(genus=Genus_Courage)

    def1 = &#39;The ability to do something very hard and constancy&#39;
    def2 = &#39;The capacity to do something quite hard and with constance&#39;
    test = infer_similiarity(&#39;%s&#39; % def1,
                             &#39;%s&#39; % def2)
    print(f&#39;\nAnother test for functionality: similarity score between:\n{def1} \n{def2} is: {test}\n&#39;)

    content_to_form_result(hypon_list=hypon_courage, concept=courage, title=term_list[0])

    concept_list_no_courage = [paper, apprehension, sharpener]
    term_list = term_list[1:]

    # how much we want to dig in wordnet
    depth = 6
    for (c, term) in zip(concept_list_no_courage, term_list):
        print(f&#39;\n Computing concept {term}\n&#39;)
        genus = compute_genus(concept=c, num=depth)
        hypon = get_synset_hyponyms(genus=genus)
        content_to_form_result(hypon_list=hypon, concept=c, title=term, num=depth)

    end = time.time()
    print(&#39;\nTotal time: {} seconds&#39;.format(end - start))</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="DiCaro.Primo_gruppo.content-to-form.compute_genus"><code class="name flex">
<span>def <span class="ident">compute_genus</span></span>(<span>concept, num=4)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def compute_genus(concept, num=4):
    extracted_c = concept.apply(lambda x: words_extraction(x.lower())[:num])
    print(extracted_c.head())
    extracted_c = list(chain.from_iterable(extracted_c))

    # Wrap it in a counter
    counter = Counter(extracted_c)

    genus = []
    for key, value in counter.items():
        if value in sorted(counter.values())[-num:]:
            genus.append(key)
    return genus</code></pre>
</details>
</dd>
<dt id="DiCaro.Primo_gruppo.content-to-form.content_to_form_result"><code class="name flex">
<span>def <span class="ident">content_to_form_result</span></span>(<span>hypon_list, concept, title, num=4)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def content_to_form_result(hypon_list, concept, title, num=4):
    max_sym = 0
    my_synset = &#39;&#39;
    max_list = []

    for hyp in hypon_list:
        # Here I extract the definition
        lex = []
        definition = hyp.definition()
        lex.append(definition)
        # print(&#39;definition: &#39; + str(definition))
        for ex in hyp.examples():
            lex.append(ex)
            # print(&#39;example: &#39; + str(ex))

        for my_def in concept:
            for wn_def in lex:
                my_sym = infer_similiarity(my_def, wn_def, n=num)
                if my_sym &gt; max_sym:
                    max_list.append([max_sym, hyp])
                    max_sym = my_sym
                    my_synset = hyp
    print(&#39;max_sym is: &#39; + str(max_sym))
    print(f&#39;my wn synset inferred for {title} is: {my_synset}&#39;)

    print(f&#39;The best word forms for {title} concept&#39;)
    for elem in sorted(max_list, key=lambda x: x[0], reverse=True):
        print(f&#39;Score: {elem[0]} for synset: {elem[1]}&#39;)</code></pre>
</details>
</dd>
<dt id="DiCaro.Primo_gruppo.content-to-form.evaluate_performance"><code class="name flex">
<span>def <span class="ident">evaluate_performance</span></span>(<span>bow1, bow2)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def evaluate_performance(bow1, bow2):
    return len(set(bow1) &amp; set(bow2)) * 2 / (len(bow1) + len(bow2))</code></pre>
</details>
</dd>
<dt id="DiCaro.Primo_gruppo.content-to-form.get_synset_hyponyms"><code class="name flex">
<span>def <span class="ident">get_synset_hyponyms</span></span>(<span>genus)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_synset_hyponyms(genus):
    hypon_l = []
    for gen in genus:
        for ss in wn.synsets(str(gen)):
            # print(f&#39;genus.sense: {str(ss.name())}&#39;)
            for hypon in ss.hyponyms():  # trovo gli iponimi
                hypon_l.append(hypon)
                # print(f&#39;hypon_l: {str(hypon_l)}&#39;)
    return hypon_l</code></pre>
</details>
</dd>
<dt id="DiCaro.Primo_gruppo.content-to-form.infer_similiarity"><code class="name flex">
<span>def <span class="ident">infer_similiarity</span></span>(<span>def1, def2, n=4)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def infer_similiarity(def1, def2, n=4):
    bow_a = list(words_extraction(def1.lower()))[:n]
    bow_b = list(words_extraction(def2.lower()))[:n]
    result = evaluate_performance(bow_a, bow_b)
    return result</code></pre>
</details>
</dd>
<dt id="DiCaro.Primo_gruppo.content-to-form.words_extraction"><code class="name flex">
<span>def <span class="ident">words_extraction</span></span>(<span>sent)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def words_extraction(sent):
    bag = []
    stop_words = set(stopwords.words(&#39;english&#39;))
    punctuation = {&#39;,&#39;, &#39;;&#39;, &#39;(&#39;, &#39;)&#39;, &#39;{&#39;, &#39;}&#39;, &#39;:&#39;, &#39;?&#39;, &#39;!&#39;}
    # Return a tokenized copy of text, using NLTK’s recommended word tokenizer (Treebank + PunkSentence)
    tokens = nltk.word_tokenize(sent)
    for tok in tokens:
        if tok.lower() not in stop_words:
            if tok.lower() not in punctuation:
                bag.append(tok.lower())
    return list(bag)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="DiCaro.Primo_gruppo" href="index.html">DiCaro.Primo_gruppo</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="DiCaro.Primo_gruppo.content-to-form.compute_genus" href="#DiCaro.Primo_gruppo.content-to-form.compute_genus">compute_genus</a></code></li>
<li><code><a title="DiCaro.Primo_gruppo.content-to-form.content_to_form_result" href="#DiCaro.Primo_gruppo.content-to-form.content_to_form_result">content_to_form_result</a></code></li>
<li><code><a title="DiCaro.Primo_gruppo.content-to-form.evaluate_performance" href="#DiCaro.Primo_gruppo.content-to-form.evaluate_performance">evaluate_performance</a></code></li>
<li><code><a title="DiCaro.Primo_gruppo.content-to-form.get_synset_hyponyms" href="#DiCaro.Primo_gruppo.content-to-form.get_synset_hyponyms">get_synset_hyponyms</a></code></li>
<li><code><a title="DiCaro.Primo_gruppo.content-to-form.infer_similiarity" href="#DiCaro.Primo_gruppo.content-to-form.infer_similiarity">infer_similiarity</a></code></li>
<li><code><a title="DiCaro.Primo_gruppo.content-to-form.words_extraction" href="#DiCaro.Primo_gruppo.content-to-form.words_extraction">words_extraction</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>